(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31fe6440"],{"27a1":function(t,e,a){},"36e6":function(t,e,a){"use strict";a("27a1")},e28a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bbox"},[t._m(0),a("div",{staticClass:"mid"},[t._m(1),a("div",{staticClass:"right"},[a("div",{staticClass:"rightt"},[t._v("扫码登陆")]),a("img",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.qrimgs,alt:""}}),t._m(2)])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top"},[a("div",{staticClass:"topp"},[t._v(" 登录 "),a("i",{staticClass:"el-icon-close"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left"},[a("img",{attrs:{src:"\n         https://p5.music.126.net/obj/wo3DlcOGw6DClTvDisK1/9643571155/525c/faac/2dc6/fe695c03c7c358ddaa4651736b26a55f.png",alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rightb"},[t._v("使用 "),a("a",{staticStyle:{color:"skyblue"},attrs:{href:"https://music.163.com/#/download"}},[t._v("网易云app")]),t._v(" 扫码登录")])}],n=a("1da1"),r=(a("96cf"),a("bc3a")),c=a.n(r),o={props:{loginVisible:{type:Boolean,default:!1}},data:function(){return{unikey:"",qrurl:"",qrimgs:"",qrCheckData:{},isLogin:!1}},mounted:function(){this.getKey()},methods:{getKey:function(){var t=this;c.a.get("https://netease-cloud-music-api-beta-lyart.vercel.app/login/qr/key",{params:{timerstamp:(new Date).getTime()}}).then((function(e){t.unikey=e.data.data.unikey,t.loginQqr(t.unikey)}))},loginQqr:function(t){var e=this;c.a.get("https://netease-cloud-music-api-beta-lyart.vercel.app/login/qr/create",{params:{timerstamp:(new Date).getTime(),qrimg:!0,key:t}}).then((function(t){e.qrurl=t.data.data.qrurl,e.qrimgs=t.data.data.qrimg,e.qrCheck()}))},qrCheck:function(){var t=this;c.a.get("https://netease-cloud-music-api-beta-lyart.vercel.app/login/qr/check",{params:{key:this.unikey,timerstamp:(new Date).getTime(),withCredentials:!0}}).then((function(e){console.log(e),t.qrCheckData=e.data,sessionStorage.setItem("cookie",e.data.cookie),t.isLogin=!0}))},getStatus:function(){c.a.get("https://netease-cloud-music-api-beta-lyart.vercel.app/login/status?cookie=".concat(sessionStorage.getItem("cookie")),{}).then((function(t){sessionStorage.getItem("cookie"),sessionStorage.setItem("isLogin",t.data.data.account.status),sessionStorage.setItem("userid",t.data.data.account.id),sessionStorage.setItem("avatarUrl",t.data.data.profile.avatarUrl),sessionStorage.setItem("nickname",t.data.data.profile.nickname),console.log(666)}))}},watch:{isLogin:function(){var t=this,e=setInterval(Object(n["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.qrCheck(),s=t.qrCheckData.code,801===s||802===s||803===s&&(sessionStorage.setItem("user",!0),t.$router.push("/"),clearInterval(e),t.getStatus());case 3:case"end":return a.stop()}}),a)}))),5e3)}}},l=o,u=(a("36e6"),a("2877")),m=Object(u["a"])(l,s,i,!1,null,"be33319e",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-31fe6440.c77b607b.js.map
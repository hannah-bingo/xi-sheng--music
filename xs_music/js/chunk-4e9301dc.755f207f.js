(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e9301dc"],{"0463":function(t,s,e){},2232:function(t,s,e){"use strict";e("0463")},"2bfc":function(t,s,e){"use strict";e("76f1")},"3d3d":function(t,s,e){"use strict";e("b104")},"52c2":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"play-list"},t._l(t.playList,(function(s){return e("div",{key:s.id,staticClass:"item"},[e("router-link",{staticClass:"faceImg",attrs:{to:{path:"playlist",query:{id:s.id}}}},[e("el-image",{attrs:{src:s.coverImgUrl,lazy:""}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])]),e("span",{staticClass:"playCount"},[e("i",{staticClass:"iconfont icon-playnum"}),e("em",[t._v(t._s(t.$utils.formartNum(s.playCount)))])])],1),e("div",{staticClass:"info"},[e("router-link",{staticClass:"info_name",attrs:{to:{path:"playlist/detail",query:{id:s.id}}}},[t._v(t._s(s.name))]),e("div",{staticClass:"tags"},t._l(s.tags,(function(s,a){return e("router-link",{key:a,staticClass:"tag",attrs:{to:{path:"playlist",query:{cat:s}}}},[t._v("#"+t._s(s))])})),1)],1)],1)})),0)},i=[],n={name:"play-list",components:{},props:["playList"],data:function(){return{}}},r=n,c=(e("3d3d"),e("2877")),l=Object(c["a"])(r,a,i,!1,null,"bad0ef56",null);s["a"]=l.exports},"5cfd":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"detail"},[e("div",{staticClass:"w1200"},[e("div",{staticClass:"detail-container"},[e("div",{staticClass:"detail-main"},[e("div",{staticClass:"cover"},[e("div",{staticClass:"cover-img"},[e("el-image",{attrs:{src:t.details.coverImgUrl}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])])],1),e("div",{staticClass:"cover-info"},[e("div",{staticClass:"cover-title"},[t._v(" "+t._s(t.details.name)+" ")]),t.details.creator?e("div",{staticClass:"cover-author"},[e("el-image",{staticClass:"cover-avatar",attrs:{src:t.details.creator.avatarUrl}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])]),e("div",{staticClass:"cover-name"},[t._v(t._s(t.details.creator.nickname))]),e("div",{staticClass:"cover-date"},[t._v(" "+t._s(t.$utils.formartDate(t.details.createTime,"yyyy-MM-dd"))+" ")])],1):t._e(),t.details.tags?e("div",{staticClass:"cover-tags"},t._l(t.details.tags,(function(s,a){return e("router-link",{key:a,staticClass:"tag",attrs:{to:{path:"/playlist",query:{cat:s}}}},[t._v("#"+t._s(s))])})),1):t._e(),e("div",{staticClass:"cover-digital"},[e("span",{staticClass:"cover-playCount"},[e("i",{staticClass:"iconfont icon-playnum"}),t._v(" "+t._s(t.$utils.formartNum(t.details.playCount))+"次")]),e("span",{staticClass:"cover-collect"},[e("i",{staticClass:"iconfont icon-collect"}),t._v(" "+t._s(t.$utils.formartNum(t.details.subscribedCount)))]),e("span",{staticClass:"cover-comment"},[e("i",{staticClass:"iconfont icon-comment"}),t._v(" "+t._s(t.$utils.formartNum(t.details.commentCount)))])]),e("div",{staticClass:"cover-desc"},[e("h5",[t._v(" 歌单简介"),t.isShowDesc?e("em",{staticClass:"desc-close",on:{click:function(s){t.isShowDesc=!1}}},[e("i",{staticClass:"iconfont icon-closed"})]):t._e()]),e("p",{domProps:{innerHTML:t._s(t.details.description)},on:{click:t.showAllDesc}}),t.isShowDesc?e("pre",{staticClass:"cover-desc-all"},[t._v("                                  "+t._s(t.details.description)+"\n                              ")]):t._e()])])]),e("div",{staticClass:"song-main"},[e("div",{staticClass:"song-header"},[e("h4",[t._v(" 歌曲列表 "),e("em",[t._v(t._s(t.total+"首歌"))])]),e("span",{staticClass:"play-all",on:{click:t.playAllSongs}},[e("i",{staticClass:"iconfont icon-audio-play"}),t._v(" 播放全部")]),e("span",{class:["collect",t.details.subscribed?"active":""],on:{click:function(s){return t.subPlayList(t.details)}}},[e("i",{class:["iconfont","icon-collect"+(t.details.subscribed?"-active":"")]}),t._v(" "+t._s(t.details.subscribed?"已收藏":"收藏"))])]),t.isLoading&&t.isLogin?[e("Loading")]:[e("song-list",{attrs:{songList:t.songList,stripe:!0}}),t.isLogin?t._e():e("div",{staticClass:"showAllSongsTips"},[e("span",{on:{click:t.loginDialog}},[t._v("登录后查看全部歌曲")])])]],2)]),e("div",{staticClass:"detail-aside"},[e("div",{staticClass:"playlist-collect"},[e("h3",{staticClass:"aside-title"},[t._v("喜欢这个歌单的人")]),e("div",{staticClass:"aside-main collect-main"},t._l(t.collects,(function(t){return e("router-link",{key:t.userId,staticClass:"collect-author",attrs:{to:{path:"/singer",query:{id:t.userId}}}},[e("el-image",{attrs:{src:t.avatarUrl}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])])],1)})),1)]),e("div",{staticClass:"playlist-recom"},[e("h3",{staticClass:"aside-title"},[t._v("相关歌单推荐")]),e("div",{staticClass:"aside-main recom-main"},t._l(t.playlists,(function(s){return e("router-link",{key:s.id,staticClass:"recom-item",attrs:{to:{path:"/playlist",query:{id:s.id}}}},[e("el-image",{attrs:{src:s.coverImgUrl}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])]),e("div",{staticClass:"recom-info"},[e("div",{staticClass:"recom-name"},[t._v(t._s(s.name))]),e("div",{staticClass:"recom-author"},[t._v(" By. "),e("router-link",{attrs:{to:{path:"/user",query:{id:s.creator.userId}}}},[t._v(t._s(s.creator.nickname))])],1)])],1)})),1)]),e("div",{staticClass:"playlist-comment"},[e("h3",{staticClass:"aside-title"},[t._v("歌单评论")]),e("div",{staticClass:"aside-main comment-main"},t._l(t.comments,(function(s){return e("div",{key:s.commentId,staticClass:"comment-item"},[e("router-link",{attrs:{to:{path:"/user",query:{id:s.commentId}}}},[e("el-image",{attrs:{src:s.user.avatarUrl}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])])],1),e("div",{staticClass:"comment-info"},[e("div",{staticClass:"comment-userInfo"},[e("router-link",{staticClass:"comment-name",attrs:{to:{path:"/user",query:{id:s.commentId}}}},[t._v(t._s(s.user.nickname))]),e("span",{staticClass:"comment-date"},[t._v(t._s(t.$utils.formatMsgTime(s.time)))])],1),e("div",{staticClass:"comment-desc"},[t._v(t._s(s.content))])])],1)})),0)])])])])])},i=[],n=e("1da1"),r=e("5530"),c=(e("a4d3"),e("e01a"),e("fb6a"),e("3ca3"),e("ddb0"),e("d81d"),e("a15b"),e("99af"),e("96cf"),e("2f62")),l=e("eb4d"),o=e("52c2"),u=function(){var t=this,s=t.$createElement;t._self._c;return t._m(0)},d=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"loading"},[e("div",{staticClass:"loader"})])}],m={components:{},data:function(){return{}},computed:{},methods:{}},p=m,v=(e("2232"),e("2877")),h=Object(v["a"])(p,u,d,!1,null,"56e6c2b0",null),f=h.exports,g={name:"PlayListDetail",components:{songList:o["a"],Loading:f},mounted:function(){this._initialize(this.$route.query.id)},data:function(){return{details:{},songList:[],collects:[],playlists:[],comments:[],total:0,isLoading:!0,isShowDesc:!1}},computed:Object(r["a"])({},Object(c["c"])(["isLogin","playList"])),methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["d"])({setPlayStatus:"SET_PLAYSTATUS",setPlayList:"SET_PLAYLIST",setPlayIndex:"SET_PLAYINDEX"})),Object(c["b"])(["loginSuc","playAll"])),{},{_initialize:function(t){this.getDetail({id:t,s:8}),this.getCollect({id:t,limit:18}),this.getRecom({id:t}),this.getComment({id:t,limit:9})},getDetail:function(t){var s=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.isLoading=!0,e.next=3,s.$http.playlistdetail(t);case 3:if(a=e.sent,i=a.data,200===i.code){e.next=7;break}return e.abrupt("return",s.$msg.error("数据请求失败"));case 7:s.details=i.playlist,s.isLogin?(n=i.playlist.trackIds,s.getAllSongs(n)):(s.songList=s._formatSongs(i.playlist.tracks),s.total=s.songList.length,s.isLoading=!1);case 9:case"end":return e.stop()}}),e)})))()},getCollect:function(t){var s=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.$http.playlistSCollect(t);case 2:if(a=e.sent,i=a.data,200===i.code){e.next=6;break}return e.abrupt("return",s.$msg.error("数据请求失败"));case 6:s.collects=i.subscribers;case 7:case"end":return e.stop()}}),e)})))()},getRecom:function(t){var s=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.$http.playlistRelated(t);case 2:if(a=e.sent,i=a.data,200===i.code){e.next=6;break}return e.abrupt("return",s.$msg.error("数据请求失败"));case 6:s.playlists=i.playlists;case 7:case"end":return e.stop()}}),e)})))()},getComment:function(t){var s=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.$http.playlistComment(t);case 2:if(a=e.sent,i=a.data,200===i.code){e.next=6;break}return e.abrupt("return",s.$msg.error("数据请求失败"));case 6:s.comments=i.comments;case 7:case"end":return e.stop()}}),e)})))()},showAllDesc:function(){this.details.description.length>120&&(this.isShowDesc=!this.isShowDesc)},getAllSongs:function(t){var s=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,n,r,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=[],i=500,n=[],r=0;r<t.length;r+=i)a.push(t.slice(r,r+i));c=regeneratorRuntime.mark((function t(e){var i,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=[],a[e].map((function(t){i.push(t.id)})),s.isLoading=!0,t.next=5,s.$http.songDetail({ids:i.join(","),timestamp:(new Date).valueOf()+e});case 5:r=t.sent,c=r.data,n=n.concat(s._formatSongs(c));case 8:case"end":return t.stop()}}),t)})),l=0;case 6:if(!(l<a.length)){e.next=11;break}return e.delegateYield(c(l),"t0",8);case 8:l++,e.next=6;break;case 11:s.songList=n,s.total=n.length,s.isLoading=!1;case 14:case"end":return e.stop()}}),e)})))()},loginDialog:function(){this.$store.dispatch("loginSuc",!0)},_formatSongs:function(t){var s=[];return t.songs.map((function(e,a){e.id&&(e.license=!t.privileges[a].cp,s.push(Object(l["a"])(e)))})),s},playAllSongs:function(){this.playAll({list:this.songList})},subPlayList:function(t){var s=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.$http.subPlayList({id:t.id,t:t.subscribed?2:1});case 2:if(a=e.sent,i=a.data,200===i.code){e.next=6;break}return e.abrupt("return",s.$msg.error("数据请求失败"));case 6:s.details.subscribed=!s.details.subscribed;case 7:case"end":return e.stop()}}),e)})))()}}),watch:{$route:function(t,s){var e=this.$route.query.id;e&&(this.songList=[],this.total=0,this._initialize(e))},isLogin:function(t,s){if(t){var e=this.details.trackIds;this.getAllSongs(e)}else this.songList=this.details.tracks,this.total=this.details.tracks.length}}},C=g,b=(e("2bfc"),Object(v["a"])(C,a,i,!1,null,"5094a174",null));s["default"]=b.exports},"76f1":function(t,s,e){},a15b:function(t,s,e){"use strict";var a=e("23e7"),i=e("44ad"),n=e("fc6a"),r=e("a640"),c=[].join,l=i!=Object,o=r("join",",");a({target:"Array",proto:!0,forced:l||!o},{join:function(t){return c.call(n(this),void 0===t?",":t)}})},b104:function(t,s,e){},d81d:function(t,s,e){"use strict";var a=e("23e7"),i=e("b727").map,n=e("1dde"),r=n("map");a({target:"Array",proto:!0,forced:!r},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},eb4d:function(t,s,e){"use strict";function a(t,s){for(var e=0;e<s.length;e++){var a=s[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,s,e){return s&&a(t.prototype,s),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}e.d(s,"a",(function(){return l}));e("b0c0");var r=e("fa7d"),c=i((function t(s){var e=s.id,a=s.name,i=s.mvId,r=s.singer,c=s.album,l=s.alia,o=s.duration,u=s.url,d=s.vip,m=s.license,p=s.publishTime;n(this,t),this.id=e,this.name=a,this.mvId=i,this.singer=r,this.album=c,this.alia=l,this.duration=o,this.url=u,this.vip=d,this.license=m,this.publishTime=p}));function l(t){return new c({id:String(t.id),name:t.name,mvId:t.mv,singer:t.ar,album:t.al,alia:t.alia,vip:1===t.fee,license:t.license,duration:r["a"].formatSongTime(t.dt),url:"https://music.163.com/song/media/outer/url?id=".concat(t.id,".mp3"),publishTime:r["a"].formatMsgTime(t.publishTime)})}}}]);
//# sourceMappingURL=chunk-4e9301dc.755f207f.js.map
{"version":3,"sources":["webpack:///./src/views/artist/Singer.vue?9e5a","webpack:///./src/views/artist/Singer.vue?98f9","webpack:///src/views/artist/Singer.vue","webpack:///./src/views/artist/Singer.vue?12c4","webpack:///./src/views/artist/Singer.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_v","staticStyle","attrs","qrimgs","staticRenderFns","props","loginVisible","type","default","data","unikey","qrurl","qrCheckData","isLogin","mounted","methods","getKey","params","timerstamp","then","loginQqr","key","qrimg","qrCheck","withCredentials","console","sessionStorage","getStatus","watch","code","clearInterval","component"],"mappings":"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","file":"js/chunk-31fe6440.c77b607b.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Singer.vue?vue&type=style&index=0&id=be33319e&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bbox\"},[_vm._m(0),_c('div',{staticClass:\"mid\"},[_vm._m(1),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"rightt\"},[_vm._v(\"扫码登陆\")]),_c('img',{staticStyle:{\"width\":\"200px\",\"height\":\"200px\"},attrs:{\"src\":_vm.qrimgs,\"alt\":\"\"}}),_vm._m(2)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"topp\"},[_vm._v(\" 登录 \"),_c('i',{staticClass:\"el-icon-close\"})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"left\"},[_c('img',{attrs:{\"src\":\"\\n         https://p5.music.126.net/obj/wo3DlcOGw6DClTvDisK1/9643571155/525c/faac/2dc6/fe695c03c7c358ddaa4651736b26a55f.png\",\"alt\":\"\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rightb\"},[_vm._v(\"使用 \"),_c('a',{staticStyle:{\"color\":\"skyblue\"},attrs:{\"href\":\"https://music.163.com/#/download\"}},[_vm._v(\"网易云app\")]),_vm._v(\" 扫码登录\")])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"bbox\">\r\n      <div class=\"top\">\r\n          <div class=\"topp\">\r\n               登录\r\n            <i class=\"el-icon-close\"></i>\r\n          </div>\r\n      </div>\r\n      <div class=\"mid\">\r\n      <div class=\"left\">\r\n          <img src=\"\r\n          https://p5.music.126.net/obj/wo3DlcOGw6DClTvDisK1/9643571155/525c/faac/2dc6/fe695c03c7c358ddaa4651736b26a55f.png\" alt=\"\">\r\n      </div>\r\n      <div class=\"right\">\r\n          <div class=\"rightt\">扫码登陆</div>\r\n          <img :src=\"qrimgs\" alt=\"\" style=\"width:200px;height:200px\">\r\n <div class=\"rightb\">使用&nbsp;<a href=\"https://music.163.com/#/download\" style=\"color:skyblue\">网易云app</a>\r\n     扫码登录</div>\r\n      </div>\r\n        </div>\r\n  </div>\r\n\r\n </template>\r\n \r\n <script>\r\n import axios from 'axios';\r\n export default {\r\n   props: {\r\n     // 登录弹框是否存在\r\n     loginVisible: {\r\n       type: Boolean,\r\n       default: false\r\n     }\r\n   },\r\n   data() {\r\n     return {\r\n      unikey: '',//key\r\n         qrurl: '',\r\n         qrimgs: '',//二维码图片\r\n         qrCheckData: {},//状态\r\n         isLogin: false//是否登录\r\n     }\r\n   },\r\n    mounted() {\r\n             this.getKey()\r\n         },\r\n   methods:{\r\n     //获取二维码的key值\r\n         getKey() {\r\n                 let keyData = axios.get('https://netease-cloud-music-api-beta-lyart.vercel.app/login/qr/key', {\r\n                params:{\r\n                  timerstamp: new Date().getTime(),\r\n                }     \r\n                 }).then(res=>{\r\n                    this.unikey = res.data.data.unikey\r\n                 this.loginQqr(this.unikey)\r\n                 })  \r\n             },\r\n     //通过key去获取二维码\r\n     loginQqr(key) {\r\n         let qrData = axios.get('https://netease-cloud-music-api-beta-lyart.vercel.app/login/qr/create',\r\n          {\r\n             params:{\r\n             timerstamp: new Date().getTime(),//传入参数时间戳\r\n             qrimg: true,\r\n             key:key,}\r\n         }).then(res=>{\r\n        this.qrurl = res.data.data.qrurl\r\n         this.qrimgs = res.data.data.qrimg\r\n         this.qrCheck()\r\n                 })\r\n        \r\n     },\r\n     //获取二维码的状态\r\n      qrCheck() {\r\n         let qrCheckData = axios.get('https://netease-cloud-music-api-beta-lyart.vercel.app/login/qr/check', {\r\n           params:{\r\n             key: this.unikey,\r\n             timerstamp: new Date().getTime(),//传入参数时间戳\r\n              withCredentials: true\r\n           }         \r\n         }).then(res=>{\r\n           // console.log(2222);\r\n           console.log(res);\r\n \r\n         this.qrCheckData = res.data\r\n        sessionStorage.setItem('cookie', res.data.cookie);\r\n         this.isLogin = true\r\n                 }) \r\n     },\r\n \r\n     //获取登录之后的状态\r\n      getStatus() {\r\n         let getStatus = axios.get(`https://netease-cloud-music-api-beta-lyart.vercel.app/login/status?cookie=${sessionStorage.getItem(\"cookie\")}`, {\r\n                \r\n         }).then(res=>{\r\n        sessionStorage.getItem(\"cookie\");\r\n         // console.log(res.data.data.account.id,res.data.data.account.status);\r\n         // console.log(res.data.data.profile.avatarUrl,res.data.data.profile.nickname);\r\n \r\n        sessionStorage.setItem('isLogin', res.data.data.account.status);\r\n        sessionStorage.setItem('userid', res.data.data.account.id);\r\n        sessionStorage.setItem('avatarUrl', res.data.data.profile.avatarUrl);\r\n        sessionStorage.setItem('nickname', res.data.data.profile.nickname);\r\n        console.log(666);\r\n       \r\n     // console.log( sessionStorage.getItem('isLogin'));\r\n     // console.log(sessionStorage.getItem(\"nickname\"));\r\n \r\n                 }) \r\n     },\r\n \r\n \r\n     //获取用户信息 , 歌单，收藏，mv, dj 数量\r\n \r\n     //   getUinfo() {\r\n     //     let getUinfo = axios.get('https://netease-cloud-music-api-beta-lyart.vercel.app/user/detail?uid=32953014', {\r\n                \r\n     //     }).then(res=>{\r\n     //       console.log('0000000');\r\n     //       console.log(res);\r\n     //     // console.log(res.data.data.code);\r\n     //             }) \r\n     // },\r\n   },\r\n        watch: {\r\n             isLogin: function () {\r\n                 let times = setInterval(async () => {\r\n                     this.qrCheck()\r\n                     let code = this.qrCheckData.code\r\n                     // 判断返回值中的code\r\n                     if (code === 801) {} else if (code === 802) {} else if (code === 803) {\r\n \r\n              sessionStorage.setItem(\"user\", true);\r\n \r\n \r\n                this.$router.push(\"/\");\r\n                         //用户登录成功后清除定时器\r\n                         clearInterval(times)\r\n                         //获取登录之后的uid和用户详情以及登录状态\r\n                       this.getStatus()\r\n                       // this.getUinfo()\r\n                       \r\n \r\n                     }\r\n                 }, 5000)\r\n             },\r\n         },\r\n \r\n }\r\n </script>\r\n <style lang=\"less\" scoped>\r\n .bbox{\r\n    margin: auto;\r\n    position: relative;\r\n     width: 530px;\r\n     height: 350px;\r\n     background-color: #fff;\r\n     border: #333 solid 1px;\r\n     \r\n }\r\n .top{\r\n     width: 530px;\r\n     height: 50px;\r\n     background-color: rgb(49, 35, 35);\r\n   color:white\r\n }\r\n .topp{\r\n     font-weight: bold;\r\n   margin-left: 18px;\r\n   margin-right:18px ;\r\n  padding-top: 16px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n }\r\n .mid{\r\n     padding: 30px;\r\n       display: flex;\r\n }\r\n .left img{\r\n     width: 125px;\r\n     height: 220px;\r\n     margin-left: 20px;\r\n \r\n }\r\n .right{\r\n        margin-left: 20px;\r\n         display: flex;\r\n         align-content: space-between;\r\n         flex-direction: column\r\n }\r\n .rightt{\r\n     margin-left: 5px;\r\n     font-size: 18px;\r\n     font-weight: 500;\r\n     color: #333;\r\n     // width: 200px;\r\n     // height: 24px;\r\n     color: rgba(0, 0, 0, 0.4);\r\n    \r\n }\r\n .rightb{\r\n margin-left: 15px;\r\n }\r\n .but{\r\n   position: absolute;\r\n   bottom: 0;\r\n   margin-left: 10px;\r\n }\r\n .mid{\r\n   margin-left: 50px;\r\n }\r\n     \r\n </style>\r\n ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Singer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Singer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Singer.vue?vue&type=template&id=be33319e&scoped=true&\"\nimport script from \"./Singer.vue?vue&type=script&lang=js&\"\nexport * from \"./Singer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Singer.vue?vue&type=style&index=0&id=be33319e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"be33319e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}